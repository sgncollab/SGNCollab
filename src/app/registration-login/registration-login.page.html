<ion-content class="background">

  <div style="margin-top: 16vh;">
    <ion-row style="justify-content: center;">
      <ion-col size="1">
      </ion-col>
      <ion-col size="5">
        <img class="g" (click)="displayMenu('search')" src="(../../../assets/images/2.png">
      </ion-col>
      <ion-col size="5">
        <img class="g" style="float: right;" (click)="displayMenu('display')" src="(../../../assets/images/1.png">
      </ion-col>
      <ion-col size="1">
      </ion-col>
    </ion-row>
  </div>
  <ion-card class="content">
    <ion-segment *ngIf="!guest" mode="ios" value="Login">
      <ion-segment-button style="height:6vh; font-family: Dosis-Regular; font-size: 2.5vh;" value="Login" (click)="checkView('loginView')">
        Login
      </ion-segment-button>
      <ion-segment-button style="height:6vh; font-family: Dosis-Regular; font-size: 2.5vh;" value="Register" (click)="checkView('registerView')">
        Register
      </ion-segment-button>
    </ion-segment>

    <ion-segment *ngIf="guest" mode="ios" value="Register">
      <ion-segment-button  value="Login" (click)="checkView('loginView')" style="height:6vh; font-family: Dosis-Regular; font-size: 2.5vh;" >
        Login
      </ion-segment-button>
      <ion-segment-button class="register" value="Register" (click)="checkView('registerView')" style="height:6vh; font-family: Dosis-Regular; font-size: 2.5vh;">
        Register
      </ion-segment-button>
    </ion-segment>

    <!-- Registration -->
    <div *ngIf="display" >
      <!-- Username -->
      <ion-item lines="none">
        <ion-icon name="person-sharp"></ion-icon>
        <ion-input type="text" [(ngModel)]="username" placeholder="Username" class="ion-text-capitalize" style="font-family: Dosis-Regular;"
          (ionChange)="inputValidation($event,'username')" pattern="^[0-9]+$"></ion-input>
      </ion-item>

      <span *ngIf="uName" class="errorMsg">Username is required</span>
      <span *ngIf="length" class="errorMsg">Username should atlest contain 4 characters</span>
      <span *ngIf="uNameExist" class="errorMsg">Username already taken</span>
      <span *ngIf="patternCheck" class="errorMsg">Username cannot be numbers only</span>
      <!-- <span></span> -->

      <!-- Create PIN -->
      <ion-item lines="none">
        <ion-icon name="key"></ion-icon>
        <!-- <input type="password" pattern="[0-9]*" inputmode="numeric"> -->
        <ion-input [type]="getType()" placeholder="Create PIN" inputmode="numeric" [(ngModel)]="createPIN"
          (ionChange)="inputValidation($event,'createpin')"></ion-input>
        <ion-icon [name]="passwordToggle" item-right (click)="toggleTextPassword()"></ion-icon>
      </ion-item>
      <span *ngIf="pin1" class="errorMsg">PIN is required</span>
      <span *ngIf="pinLength" class="errorMsg">Please enter 4 digit pin</span>
      <!-- <span *ngIf="pinnotmatch">PIN does not match</span> -->

      <!-- Confirm PIN -->
      <div [hidden]="hideConfirmPin">
        <ion-item lines="none">
          <ion-icon name="key"></ion-icon>
          <ion-input [type]="getType()" placeholder="Confirm PIN" [(ngModel)]="confirmPIN" inputmode="numeric"
            (ionChange)="inputValidation($event,'confirmpin')"></ion-input>
          <!-- <ion-icon [name]="passwordToggle" item-right (click)="toggleTextPassword()"></ion-icon> -->
        </ion-item>
        <span *ngIf="pin2" class="errorMsg">PIN is required</span>
        <span *ngIf="pinLen" class="errorMsg">Please enter 4 digit PIN</span>
        <span *ngIf="pinnotmatch" class="errorMsg">PIN does not match</span>
      </div>

      <!-- Remember me -->
      <div style=" margin-left: 15px; margin-top: 10px; margin-bottom: 10px;">
      <ion-grid style="margin-left:-1vh">
        <ion-row >
          <ion-col size="1">
            <ion-checkbox  (ionChange)="rememberMe('register',$event)"></ion-checkbox>
          </ion-col>
          <ion-col size="6">
            Remember Me
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
      <!-- <div style=" margin-left: 15px; margin-top: 10px; margin-bottom: 10px;">
        <ion-row style="margin-top:2vh">
          <ion-checkbox (ionChange)="rememberMe('register',$event)"></ion-checkbox>
          <ion-label>
            <p style="font-size: 14px; color: black; margin-left: 5px;">Remember Me</p>
          </ion-label>
        </ion-row>
      </div> -->
      <ion-button expand="full" fill="solid" color="primary" [disabled]="disabled"
        style="text-transform:none;font-size: 15px;margin-left:2vw;margin-right:2vw;margin-top:2vh;margin-bottom:2vh;"
        shape="round" (click)="register()">Register
      </ion-button>
      <span *ngIf=regError class="errorMsg">Please enter username</span>
    </div>

    <!-- Login -->
    <div *ngIf="!display">
      <ion-item lines="none">
        <ion-icon name="person-sharp"></ion-icon>
        <ion-input class="ion-text-capitalize" type="text" placeholder="Username" [(ngModel)]="enterUName"></ion-input>
        <!-- pattern="^[a-zA-Z]" -->
      </ion-item>
      <span *ngIf="loginUname" class="errorMsg">Please check your username</span>

      <ion-item lines="none">
        <ion-icon name="key"></ion-icon>
        <ion-input [type]="getType()" placeholder="Enter PIN" inputmode="numeric" [(ngModel)]="enterPIN"></ion-input>
        <ion-icon [name]="passwordToggle" item-right (click)="toggleTextPassword()"></ion-icon>
      </ion-item>
      <span *ngIf="loginPin" class="errorMsg">Please check your PIN</span>
      <div style=" margin-left: 15px; margin-top: 10px; margin-bottom: 10px;">
        <ion-grid style="margin-left:-1vh">
          <ion-row >
            <ion-col size="1">
              <ion-checkbox [ngModel]="rememberChecked" (ionChange)="rememberMe('login',$event)"></ion-checkbox>
            </ion-col>
            <ion-col size="6">
              Remember Me
            </ion-col>
            <ion-col size="5"  style="text-align:right; color: #3b5998" (click)="presentPopover($event)" > 
               Forgot PIN
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>

      <ion-button expand="full" fill="solid" color="primary" (click)="login()"
        style="text-transform:none;font-size:15px; margin-left:2vw;margin-right:2vw;margin-top:2vh;margin-bottom:2vh;"
        shape="round">Login</ion-button>
    </div>
  </ion-card>
 
</ion-content>